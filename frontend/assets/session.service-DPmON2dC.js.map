{"version":3,"file":"session.service-DPmON2dC.js","sources":["../../src/services/session.service.ts"],"sourcesContent":["import api from '@/lib/api';\n\nexport interface SessionCreate {\n  user_id: string;\n  course_id: string;\n  scenario_id: string;\n  persona_id: string;\n}\n\nexport interface Session {\n  id: string;\n  session_id?: string; // Compatibility alias\n  user_id: string;\n  course_id: string;\n  scenario_id: string;\n  status: string;\n  total_turns: number;\n  final_score?: number;\n  final_stage?: string;\n  started_at: string;\n  created_at?: string;\n  completed_at?: string;\n  ended_at?: string;\n  task_type?: string;\n}\n\nexport interface SessionReview {\n  session_id: string;\n  summary: {\n    total_turns: number;\n    final_score: number;\n    skill_improvement: Record<string, number>;\n    matrix_evaluation?: any;\n  };\n  effective_adoptions?: any[];\n  skill_improvement?: Record<string, number>;\n  strategy_timeline: Array<{\n    turn: number;\n    situation: string;\n    user_strategy: string;\n    golden_strategy: string;\n    is_optimal: boolean;\n    reason: string;\n  }>;\n  highlights: {\n    effective_adoptions: Array<{\n      turn: number;\n      technique: string;\n      style: string;\n      skill_delta: any;\n    }>;\n    ineffective_attempts: Array<any>;\n  };\n}\n\nexport const sessionService = {\n  createSession: async (data: SessionCreate) => {\n    const response = await api.post<Session>('/sessions', data);\n    return response.data;\n  },\n\n  listSessions: async (params?: { user_id?: string; status?: string; page?: number; page_size?: number }) => {\n    const response = await api.get<{ items: Session[]; total: number }>('/sessions', { params });\n    return response.data;\n  },\n\n  getSession: async (sessionId: string) => {\n    const response = await api.get<Session>(`/sessions/${sessionId}`);\n    return response.data;\n  },\n\n  getSessionReview: async (sessionId: string) => {\n    const response = await api.get<SessionReview>(`/sessions/${sessionId}/review`);\n    return response.data;\n  },\n\n  completeSession: async (sessionId: string) => {\n    const response = await api.patch<{ message: string; task_id: string }>(`/sessions/${sessionId}/complete`);\n    return response.data;\n  }\n};\n"],"names":["sessionService","createSession","data","api","post","listSessions","params","get","getSession","sessionId","getSessionReview","completeSession","patch"],"mappings":"sCAuDO,MAAMA,EAAiB,CAC5BC,cAAe,MAAOC,IACH,MAAMC,EAAIC,KAAc,YAAaF,CAAI,GAC1CA,KAGlBG,aAAc,MAAOC,IACF,MAAMH,EAAII,IAAyC,YAAa,CAAED,OAAAA,CAAAA,CAAQ,GAC3EJ,KAGlBM,WAAY,MAAOC,IACA,MAAMN,EAAII,IAAa,aAAaE,CAAS,EAAE,GAChDP,KAGlBQ,iBAAkB,MAAOD,IACN,MAAMN,EAAII,IAAmB,aAAaE,CAAS,SAAS,GAC7DP,KAGlBS,gBAAiB,MAAOF,IACL,MAAMN,EAAIS,MAA4C,aAAaH,CAAS,WAAW,GACxFP,IAEpB"}