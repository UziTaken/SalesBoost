import{r as o,j as l,X as A,F as M,J as S,d as h}from"./index-Brw-vjna.js";import{r as $}from"./index-CrbLbUhv.js";function F(e,a=[]){let r=[];function c(t,u){const n=o.createContext(u);n.displayName=t+"Context";const i=r.length;r=[...r,u];const d=f=>{var L;const{scope:m,children:g,...p}=f,x=((L=m==null?void 0:m[e])==null?void 0:L[i])||n,k=o.useMemo(()=>p,Object.values(p));return l.jsx(x.Provider,{value:k,children:g})};d.displayName=t+"Provider";function v(f,m){var x;const g=((x=m==null?void 0:m[e])==null?void 0:x[i])||n,p=o.useContext(g);if(p)return p;if(u!==void 0)return u;throw new Error(`\`${f}\` must be used within \`${t}\``)}return[d,v]}const s=()=>{const t=r.map(u=>o.createContext(u));return function(n){const i=(n==null?void 0:n[e])||t;return o.useMemo(()=>({[`__scope${e}`]:{...n,[e]:i}}),[n,i])}};return s.scopeName=e,[c,H(s,...a)]}function H(...e){const a=e[0];if(e.length===1)return a;const r=()=>{const c=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(t){const u=c.reduce((n,{useScope:i,scopeName:d})=>{const f=i(t)[`__scope${d}`];return{...n,...f}},{});return o.useMemo(()=>({[`__scope${a.scopeName}`]:u}),[u])}};return r.scopeName=a.scopeName,r}var T=$();function q(){return T.useSyncExternalStore(B,()=>!0,()=>!1)}function B(){return()=>{}}var w="Avatar",[G]=F(w),[J,y]=G(w),E=o.forwardRef((e,a)=>{const{__scopeAvatar:r,...c}=e,[s,t]=o.useState("idle");return l.jsx(J,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:t,children:l.jsx(A.span,{...c,ref:a})})});E.displayName=w;var N="AvatarImage",_=o.forwardRef((e,a)=>{const{__scopeAvatar:r,src:c,onLoadingStatusChange:s=()=>{},...t}=e,u=y(N,r),n=K(c,t),i=M(d=>{s(d),u.onImageLoadingStatusChange(d)});return S(()=>{n!=="idle"&&i(n)},[n,i]),n==="loaded"?l.jsx(A.img,{...t,ref:a,src:c}):null});_.displayName=N;var R="AvatarFallback",b=o.forwardRef((e,a)=>{const{__scopeAvatar:r,delayMs:c,...s}=e,t=y(R,r),[u,n]=o.useState(c===void 0);return o.useEffect(()=>{if(c!==void 0){const i=window.setTimeout(()=>n(!0),c);return()=>window.clearTimeout(i)}},[c]),u&&t.imageLoadingStatus!=="loaded"?l.jsx(A.span,{...s,ref:a}):null});b.displayName=R;function C(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function K(e,{referrerPolicy:a,crossOrigin:r}){const c=q(),s=o.useRef(null),t=c?(s.current||(s.current=new window.Image),s.current):null,[u,n]=o.useState(()=>C(t,e));return S(()=>{n(C(t,e))},[t,e]),S(()=>{const i=f=>()=>{n(f)};if(!t)return;const d=i("loaded"),v=i("error");return t.addEventListener("load",d),t.addEventListener("error",v),a&&(t.referrerPolicy=a),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",d),t.removeEventListener("error",v)}},[t,r,a]),u}var j=E,I=_,P=b;const V=o.forwardRef(({className:e,...a},r)=>l.jsx(j,{ref:r,className:h("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a}));V.displayName=j.displayName;const W=o.forwardRef(({className:e,...a},r)=>l.jsx(I,{ref:r,className:h("aspect-square h-full w-full",e),...a}));W.displayName=I.displayName;const X=o.forwardRef(({className:e,...a},r)=>l.jsx(P,{ref:r,className:h("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a}));X.displayName=P.displayName;export{V as A,W as a,X as b};
