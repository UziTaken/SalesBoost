import{c as w,r as n,b as D,j as e,B as m,I as S}from"./index-Brw-vjna.js";import{C as B,b,c as N,a as T}from"./card-CgWuGiW4.js";import{S as L,T as _,a as k,b as h,c,d as E,e as o}from"./table-CMpLMPln.js";import{A as $,a as H,b as I}from"./avatar-_yJ2VmTt.js";import{a as r}from"./api-BnbAaGdM.js";import{L as z}from"./loader-circle-BsjJ3rbw.js";import"./index-CrbLbUhv.js";import"./index-D5GkNzM3.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],R=w("user-plus",M),l={createUser:async s=>await r.post("/api/v1/users",s),listUsers:async s=>await r.get("/api/v1/users",{params:s}),getUser:async s=>await r.get(`/api/v1/users/${s}`),updateUser:async(s,p)=>await r.put(`/api/v1/users/${s}`,p),deleteUser:async s=>await r.delete(`/api/v1/users/${s}`),activateUser:async s=>await r.patch(`/api/v1/users/${s}/activate`),deactivateUser:async s=>await r.patch(`/api/v1/users/${s}/deactivate`),getUserStatistics:async s=>await r.get(`/api/v1/users/${s}/statistics`)};function X(){const[s,p]=n.useState(""),[f,A]=n.useState([]),[g,x]=n.useState(!0),[u,F]=n.useState(1),[v,j]=n.useState(0),{toast:a}=D();n.useEffect(()=>{d()},[u,s]);const d=async()=>{x(!0);try{const t=await l.listUsers({search:s,page:u,page_size:20});A(t.items),j(t.total)}catch(t){console.error("Failed to fetch users",t),a({variant:"destructive",title:"加载失败",description:"无法加载用户数据，请刷新页面重试。"})}finally{x(!1)}},y=async t=>{if(confirm("确定要删除此用户吗？此操作不可撤销。"))try{await l.deleteUser(t),a({title:"删除成功",description:"用户已被删除"}),d()}catch{a({variant:"destructive",title:"删除失败",description:"无法删除用户"})}},U=async(t,i)=>{try{i?(await l.deactivateUser(t),a({title:"用户已停用"})):(await l.activateUser(t),a({title:"用户已激活"})),d()}catch{a({variant:"destructive",title:"操作失败",description:"无法更改用户状态"})}},C=f;return e.jsxs("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"4","trae-inspector-end-line":"193","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"space-y-6",children:[e.jsxs("div",{"trae-inspector-start-line":"88","trae-inspector-start-column":"6","trae-inspector-end-line":"94","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"flex items-center justify-between",children:[e.jsx("h1",{"trae-inspector-start-line":"89","trae-inspector-start-column":"8","trae-inspector-end-line":"89","trae-inspector-end-column":"78","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22User%20Management%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"text-3xl font-bold tracking-tight",children:"User Management"}),e.jsxs(m,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Add User"]})]}),e.jsxs(B,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs(N,{children:["Users Directory (",v," users)"]}),e.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"relative w-64",children:[e.jsx(L,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(S,{placeholder:"Search users...",className:"pl-8",value:s,onChange:t=>p(t.target.value)})]})]}),e.jsx(T,{children:g?e.jsx("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"12","trae-inspector-end-line":"113","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"flex items-center justify-center py-12",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):C.length===0?e.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"text-center py-12",children:[e.jsx("p",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"116","trae-inspector-end-column":"74","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20users%20found%22%2C%22textStartLine%22%3A%22116%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22116%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"text-muted-foreground mb-2",children:"No users found"}),s&&e.jsx("p",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"120","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Try%20adjusting%20your%20search%20criteria%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22120%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"text-sm text-muted-foreground",children:"Try adjusting your search criteria"})]}):e.jsxs(_,{children:[e.jsx(k,{children:e.jsxs(h,{children:[e.jsx(c,{children:"User"}),e.jsx(c,{children:"Role"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Created"}),e.jsx(c,{className:"text-right",children:"Actions"})]})}),e.jsx(E,{children:C.map(t=>{var i;return e.jsxs(h,{children:[e.jsxs(o,{className:"flex items-center gap-3",children:[e.jsxs($,{className:"h-8 w-8",children:[e.jsx(H,{src:t.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.email}`}),e.jsx(I,{children:((i=t.username)==null?void 0:i.charAt(0).toUpperCase())||t.email.charAt(0).toUpperCase()})]}),e.jsxs("div",{"trae-inspector-start-line":"144","trae-inspector-start-column":"22","trae-inspector-end-line":"147","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",children:[e.jsx("div",{"trae-inspector-start-line":"145","trae-inspector-start-column":"24","trae-inspector-end-line":"145","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"font-medium",children:t.full_name||t.username}),e.jsx("div",{"trae-inspector-start-line":"146","trae-inspector-start-column":"24","trae-inspector-end-line":"146","trae-inspector-end-column":"89","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"text-xs text-muted-foreground",children:t.email})]})]}),e.jsx(o,{children:e.jsx("span",{"trae-inspector-start-line":"150","trae-inspector-start-column":"22","trae-inspector-end-line":"156","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.role==="admin"?"bg-purple-100 text-purple-700":t.role==="teacher"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:t.role})}),e.jsx(o,{children:e.jsx("span",{"trae-inspector-start-line":"159","trae-inspector-start-column":"22","trae-inspector-end-line":"163","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx(o,{className:"text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{"trae-inspector-start-line":"169","trae-inspector-start-column":"22","trae-inspector-end-line":"184","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\pages\\\\Admin\\\\Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5CSalesBoost%5C%5Cfrontend%22%7D",className:"flex items-center justify-end gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>U(t.id,t.is_active),children:t.is_active?"Deactivate":"Activate"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>y(t.id),children:"Delete"})]})})]},t.id)})})]})})]})]})}export{X as default};
