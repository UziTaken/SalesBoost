import{a as p}from"./index-D5GkNzM3.js";const i="/api/v1",u=3e4,a=p.create({baseURL:i,timeout:u,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("[API Request Error]",e),Promise.reject(e)));a.interceptors.response.use(e=>e,async e=>{var s,n,r,o;const t=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!t._retry)return t._retry=!0,localStorage.removeItem("access_token"),window.location.href="/login",Promise.reject(e);if(((n=e.response)==null?void 0:n.status)===429){const c=e.response.headers["retry-after"];console.warn(`[API] Rate limited. Retry after ${c}s`)}return console.error("[API Response Error]",{status:(r=e.response)==null?void 0:r.status,message:e.message,data:(o=e.response)==null?void 0:o.data}),Promise.reject(e)});const d={get:async(e,t)=>(await a.get(e,t)).data,post:async(e,t,s)=>(await a.post(e,t,s)).data,put:async(e,t,s)=>(await a.put(e,t,s)).data,patch:async(e,t,s)=>(await a.patch(e,t,s)).data,delete:async(e,t)=>(await a.delete(e,t)).data};export{d as a};
